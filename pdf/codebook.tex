%!TEX program = xelatex
\documentclass[a4paper,10pt,twocolumn,oneside]{article}
\setlength{\columnsep}{10pt}                                                                    %兩欄模式的間距
\setlength{\columnseprule}{0pt}                                                                %兩欄模式間格線粗細

\usepackage{amsthm}								%定義，例題
\usepackage{amssymb}
%\usepackage[margin=2cm]{geometry}
\usepackage{fontspec}								%設定字體
\usepackage{color}
\usepackage[x11names]{xcolor}
\usepackage{listings}								%顯示code用的
%\usepackage[Glenn]{fncychap}						%排版，頁面模板
\usepackage{fancyhdr}								%設定頁首頁尾
\usepackage{graphicx}								%Graphic
\usepackage{enumerate}
\usepackage{changepage}
\usepackage[compact]{titlesec}    %compact mode for reducing margin
\usepackage{amsmath}
\usepackage{hyperref}
\hypersetup{
  linktoc=all,
  hidelinks
}
% \usepackage{CJKulem}

\usepackage[toc]{multitoc}
\renewcommand*{\multicolumntoc}{2}
\setlength{\columnsep}{0.4em} 

\usepackage[titles]{tocloft}
\renewcommand\cftsubsecfont{\scriptsize}
\renewcommand\cftsubsecpagefont{\scriptsize}
\renewcommand\cftsecindent{0.1em}
\renewcommand\cftsecnumwidth{1.8em}
\renewcommand\cftsubsecindent{0.5em}
\renewcommand\cftsubsecnumwidth{3.0em}
\renewcommand\cftdotsep{2}
\renewcommand\cftbeforesecskip{0.4em}
\renewcommand\cftbeforesubsecskip{0.2em}

%\usepackage[T1]{fontenc}
\usepackage{courier}
\topmargin=-1pt
\headsep=5pt
\textheight=780pt
\footskip=0pt
\voffset=-40pt
\textwidth=545pt
\marginparsep=0pt
\marginparwidth=0pt
\marginparpush=0pt
\oddsidemargin=0pt
\evensidemargin=0pt
\hoffset=-42pt

%\renewcommand\listfigurename{圖目錄}
%\renewcommand\listtablename{表目錄} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[CheckSingle, CJKmath]{xeCJK}

\setmainfont{Inconsolata}
\setmonofont{Inconsolata}
% \setmonofont[Path=./fonts/RobotoMono/]{RobotoMono-Medium}
% \setmonofont{Monaco}[Path=./fonts/]
\setCJKmainfont[Path=./fonts/]{jf-openhuninn-2.1}  % 中文字型
\setCJKmonofont[Path=./fonts/]{jf-openhuninn-2.1}  % 中文字型
\XeTeXlinebreaklocale "zh"						%中文自動換行
\XeTeXlinebreakskip = 0pt plus 0pt				%設定段落之間的距離
\setcounter{secnumdepth}{3}						%目錄顯示第三層

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\lst@CCPutMacro\lst@ProcessOther {"2D}{\lst@ttfamily{-{}}{-{}}}
\@empty\z@\@empty
\makeatother
\lstset{											% Code顯示
language=C++,										% the language of the code
basicstyle=\footnotesize\ttfamily, 						% the size of the fonts that are used for the code
%numbers=left,										% where to put the line-numbers
numberstyle=\footnotesize,						% the size of the fonts that are used for the line-numbers
stepnumber=1,										% the step between two line-numbers. If it's 1, each line  will be numbered
numbersep=5pt,										% how far the line-numbers are from the code
backgroundcolor=\color{white},					% choose the background color. You must add \usepackage{color}
showspaces=false,									% show spaces adding particular underscores
showstringspaces=false,							% underline spaces within strings
showtabs=false,									% show tabs within strings adding particular underscores
frame=false,											% adds a frame around the code
tabsize=2,											% sets default tabsize to 2 spaces
captionpos=b,										% sets the caption-position to bottom
breaklines=true,									% sets automatic line breaking
breakatwhitespace=false,							% sets if automatic breaks should only happen at whitespace
escapeinside={\%*}{*)},							% if you want to add a comment within your code
morekeywords={*},									% if you want to add more keywords to the set
keywordstyle=\bfseries\color{Blue1},
commentstyle=\itshape\color{Red4},
stringstyle=\itshape\color{Green4},
literate={\ \ }{{\ }}1
}

\lstdefinelanguage{vim}
{
  % list of keywords
  morekeywords={
    set, se,
    colo, syn,
    let,
    map, imap, nmap, ino, no,
    filetype,
    indent,
    on, off,
    au,
    Plugin,
    call,
    ca,
  },
  morecomment=[l]{"}, % l is for line comment
  morestring=[b]' % defines that strings are enclosed in double quotes
}

\lstdefinelanguage{kotlin}{
  comment=[l]{//},
  emph={filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println},
  keywords={!in, !is, abstract, actual, annotation, as, as?, break, by, catch, class, companion, const, constructor, continue, crossinline, data, delegate, do, dynamic, else, enum, expect, external, false, field, file, final, finally, for, fun, get, if, import, in, infix, init, inline, inner, interface, internal, is, lateinit, noinline, null, object, open, operator, out, override, package, param, private, property, protected, public, receiveris, reified, return, return@, sealed, set, setparam, super, suspend, tailrec, this, throw, true, try, typealias, typeof, val, var, vararg, when, where, while},
  morecomment=[s]{/*}{*/},
  morestring=[b]",
  morestring=[s]{"""*}{*"""},
  morekeywords={[2]{@Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String, Any, Unit, Nothing}},
  sensitive=true,
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}

\def\footnotesize{\fontsize{8}{9.5}\selectfont}
\titlespacing*{\section} {0pt}{*0}{*0}
\titleformat{\subsection}[hang]{\normalfont\large\bfseries}{\thesubsection}{0.4em}{}
\titlespacing*{\subsection} {0pt}{*0}{*0}
\titlespacing*{\subsubsection} {0pt}{*{-0.5}}{*{-0.5}}

\begin{document}
\pagestyle{fancy}
\fancyfoot{}
% \fancyhead[L]{National Central University - \_\_builtin\_orz()}
\fancyhead[L]{National Yang Ming Chiao Tung University \qquad NYCU\_Revue\_Starlight}
\fancyhead[R]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\contentsname}{Contents} 

\scriptsize
\vspace{-2em}
{ \tiny
\tableofcontents
}
\vspace{-1em}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ExplSyntaxOn
\NewDocumentCommand{\captureshell}{som}
 {
  \sdaau_captureshell:Ne \l__sdaau_captureshell_out_tl { #3 }
  \IfBooleanT { #1 }
   {% we may need to stringify the result
    \tl_set:Nx \l__sdaau_captureshell_out_tl
     { \tl_to_str:N \l__sdaau_captureshell_out_tl }
   }
  \IfNoValueTF { #2 }
   {
    \tl_use:N \l__sdaau_captureshell_out_tl
   }
   {
    \tl_set_eq:NN #2 \l__sdaau_captureshell_out_tl
   }
 }

\tl_new:N \l__sdaau_captureshell_out_tl

\cs_new_protected:Nn \sdaau_captureshell:Nn
 {
  \sys_get_shell:nnN { #2 } { } #1
  \tl_trim_spaces:N #1 % remove leading and trailing spaces
 }
\cs_generate_variant:Nn \sdaau_captureshell:Nn { Ne }
\ExplSyntaxOff

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\HashFile}[1]{\captureshell{./hash.py #1}}

\newcommand{\includecode}[2]{
  \subsection{#1}
  \vspace{-1.2em}
  \lstinputlisting{#2}
  \vspace{-1.2em}
}

\NewDocumentCommand{\includecodeX}{ O{C++} m m }{
  \subsection{#2}
  \vspace{-1.2em}
  \lstinputlisting[#1]{#3}
  \vspace{-1.2em}
}

\NewDocumentCommand{\includecodehash}{ O{C++} m m }{
  \subsection[#2]{#2{ \small\HashFile{#3} }}
  \vspace{-1.2em}
  \lstinputlisting[#1]{#3}
  \vspace{-1.2em}
}

\newcommand{\includetex}[2]{
  \subsection{#1}
  \input{#2}
  % \vspace{-1.2em}
}

\newcommand{\sectiontitle}[1]{
  \section{#1}
  \vspace{-0.5em}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\sectiontitle{Basic}
\includecodeX[language=bash]{judge}{../code/Basic/judge.sh}
\includecode{Random}{../code/Basic/Random.cpp}
% \includecodeX[language=bash]{Increase stack size}{../code/Basic/IncStack.txt}
\includecode{PBDS}{../code/DataStructure/Blackmagic.cpp}
\newpage
\includecodeX[language=vim]{vimrc}{../code/Basic/vimrc}
\includecode{default}{../code/Basic/default.cpp}
\includecode{optimize}{../code/Basic/optimize.cpp}

\sectiontitle{Matching and Flow}
\newpage
\includetex{Model}{../code/Flow/model.tex}
\includecodehash[]{Dinic}{../code/Flow/Dinic.cpp}
\includecodehash[]{KM}{../code/Flow/KM.cpp}
\includecodehash[]{MCMF}{../code/Flow/MCMF.cpp}
\includecodehash[]{HopcroftKarp}{../code/Flow/HopcroftKarp.cpp}
\includecodehash[]{SW}{../code/Flow/SW.cpp}
\includecodehash[]{GeneralMatching}{../code/Flow/GeneralMatching.cpp}

\sectiontitle{Graph}
% \includecodehash[]{Strongly Connected Component}{../code/Graph/StronglyConnectedComponent.cpp}
\includecodehash[]{2-SAT}{../code/Graph/TwoSAT.cpp}
\includecodehash[]{Tree}{../code/Graph/Tree.cpp}
\includecodehash[]{Functional Graph}{../code/Graph/FunctionalGraph.cpp}
\includecodehash[]{Manhattan MST}{../code/Graph/ManhattanMST.cpp}
% \includecodehash[]{TreeHash}{../code/Graph/TreeHash.cpp}
\includecodehash[]{Count Cycles}{../code/Graph/CountCycles.cpp}
\includecodehash[]{Maximum Clique}{../code/Graph/MaximumClique.cpp}
\includecodehash[]{Min Mean Weight Cycle}{../code/Graph/MinMeanWeightCycle.cpp}
\includecodehash[]{Block Cut Tree}{../code/Graph/BlockCutTree.cpp}
\includecodehash[]{Heavy Light D}{../code/Graph/HeavyLightDecomposition.cpp}
\includecodehash[]{Dominator Tree}{../code/Graph/DominatorTree.cpp}
\includecodehash[]{Matroid Intersection}{../code/Graph/MatroidIntersection.cpp}
\includecodehash[]{G Series-Parallel Graph}{../code/Graph/GeneralizedSeriesParallelGraph.cpp}

\sectiontitle{Data Structure}
\includecodehash[]{Lazy Segtree}{../code/DataStructure/LazySegtree.cpp}
% \includecodehash[]{Sparse Table}{../code/DataStructure/SparseTable.cpp}
\includecodehash[]{Fenwick Tree}{../code/DataStructure/FenwickTree.cpp}
% \includecodehash[]{Sweep Line Segtree}{../code/DataStructure/SweepLineSegtree.cpp}
\includecodehash[]{Interval Segtree}{../code/DataStructure/IntervalSegtree.cpp}
\includecodehash[]{PrefixMax Sum Segtree}{../code/DataStructure/PrefixMaxSumSegtree.cpp}
\includecodehash[]{Disjoint Set Union-undo}{../code/DataStructure/DisjointSetUnion-undo.cpp}
% \includecodehash[]{Treap}{../code/DataStructure/Treap.cpp}
% \includecodehash[]{LiChao Segtree}{../code/DataStructure/LiChaoSegtree.cpp}
% \includecodehash[]{Persistent SegmentTree}{../code/DataStructure/PersistentSegmentTree.cpp}
\includecodehash[]{Centroid Decomposition}{../code/DataStructure/CentroidDecomposition.cpp}
\includecodehash[]{2D BIT}{../code/DataStructure/BIT2D.cpp}
\includecodehash[]{Big Binary}{../code/DataStructure/BigBinary.cpp}
% \includecodehash[]{Big Integer}{../code/DataStructure/BigInteger.cpp}
\includecodehash[]{Splay Tree}{../code/DataStructure/SplayTree.cpp}
\includecodehash[]{Link Cut Tree}{../code/DataStructure/LinkCutTree.cpp}
\includecodehash[]{Static Top Tree}{../code/DataStructure/StaticTopTree.cpp}

\sectiontitle{Math}
\includecodehash[]{Linear Sieve}{../code/Math/LinearSieve.cpp}
\includecodehash[]{Exgcd}{../code/Math/Exgcd.cpp}
\includecodehash[]{Chinese Remainder Theorem}{../code/Math/ChineseRemainderTheorem.cpp}
\includecodehash[]{Factorize}{../code/Math/Factorize.cpp}
\includetex{Theorem}{../code/Math/theorem.tex}
\includecodehash[]{FloorBlock}{../code/Math/FloorBlock.cpp}
\includecodehash[]{FloorCeil}{../code/Math/FloorCeil.cpp}
\includetex{NTT Prime List}{../code/Math/NTTPrimes.tex}
\includecodehash[]{NTT}{../code/Math/NTT.cpp}
\includetex{FWT}{../code/Math/FWT.tex}
\includecodehash[]{FWT}{../code/Math/FWT.cpp}
\includecodehash[]{Xor Basis}{../code/Math/XorBasis.cpp}
\includecodehash[]{Lucas}{../code/Math/Lucas.cpp}
\includecodehash[]{Min25 Sieve}{../code/Math/Min25Sieve.cpp}
\includecodehash[]{Berlekamp Massey}{../code/Math/BerlekampMassey.cpp}
% \includecodehash[]{Gauss Elimination}{../code/Math/GaussElimination.cpp}
% \includecodehash[]{Linear Equation}{../code/Math/LinearEquation.cpp}
\includecodehash[]{LinearRec}{../code/Math/LinearRec.cpp}
\includecodehash[]{SubsetConv}{../code/Math/SubsetConv.cpp}
\includecodehash[]{SqrtMod}{../code/Math/SqrtMod.cpp}
\includecodehash[]{DiscreteLog}{../code/Math/DiscreteLog.cpp}
\includecodehash[]{FloorSum}{../code/Math/FloorSum.cpp}
\includecodehash[]{LP Simplex}{../code/Math/LinearProgrammingSimplex.cpp}
\includecodehash[]{Lagrange Interpolation}{../code/Math/LagrangeInterpolation.cpp}
\includecodehash[]{polyop-luogu}{../code/Math/polyop-luogu.cpp}
\includecodehash[]{Linear Mod Min}{../code/Math/LinearModMin.cpp}

\sectiontitle{Geometry}
\includecodehash[]{Basic}{../code/Geometry/geometry.cpp}
% \includecodehash[]{Point}{../code/Geometry/Point.cpp}
% \includecodehash[]{Line}{../code/Geometry/Line.cpp}
% \includecodehash[]{Circle}{../code/Geometry/Circle.cpp}
\includecodehash[]{Point to Segment Distance}{../code/Geometry/PointToSegmentDistance.cpp}
\includecodehash[]{Point in Polygon}{../code/Geometry/PointInPolygon.cpp}
\includecodehash[]{Intersection of Lines}{../code/Geometry/IntersectionOfLines.cpp}
\includecodehash[]{X of Circle and Line}{../code/Geometry/IntersectionOfCircleLine.cpp}
\includecodehash[]{Intersection of Circles}{../code/Geometry/IntersectionOfCircles.cpp}
\includecodehash[]{Area of Circle and Polygon}{../code/Geometry/AreaOfCirclePolygon.cpp}
\includecodehash[]{Area of Sector}{../code/Geometry/AreaOfSector.cpp}
\includecodehash[]{Union of Polygons}{../code/Geometry/UnionOfPolygons.cpp}
\includecodehash[]{Union of Circles}{../code/Geometry/UnionOfCircles.cpp}
\includecodehash[]{TanLs of Circle and Point}{../code/Geometry/TangentLinesOfCirclePoint.cpp}
\includecodehash[]{TangentLines of Circles}{../code/Geometry/TangentLinesOfCircles.cpp}
\includecodehash[]{Convex Hull}{../code/Geometry/ConvexHull.cpp}
\includecodehash[]{Convex Hull trick}{../code/Geometry/ConvexHulltrick.cpp}
\includecodehash[]{Dynamic Convex Hull}{../code/Geometry/DynamicConvexHull.cpp}
\includecodehash[]{Half Plane Intersection}{../code/Geometry/HalfPlaneIntersection.cpp}
\includecodehash[]{Minkowski}{../code/Geometry/Minkowski.cpp}
\includecodehash[]{Minimal Enclosing Circle}{../code/Geometry/MinimalEnclosingCircle.cpp}
\includecodehash[]{Point In Circumcircle}{../code/Geometry/PointInCircumcircle.cpp}
\includecodehash[]{Delaunay Triangulation}{../code/Geometry/DelaunayTriangulation.cpp}
\includecodehash[]{Triangle Center}{../code/Geometry/TriangleCenter.cpp}

\sectiontitle{Stringology}
\includecodehash[]{KMP}{../code/String/KMP.cpp}
\includecodehash[]{Z-algorithm}{../code/String/Zalgorithm.cpp}
\includecodehash[]{Manacher}{../code/String/Manacher.cpp}
% \includecodehash[]{SuffixArray Simple}{../code/String/SuffixArray-Simple.cpp}
% \includecodehash[]{SuffixArray SAIS}{../code/String/SuffixArray-SAIS.cpp}
\includecodehash[]{SAIS C++20}{../code/String/SuffixArray-SAIS-C++20.cpp}
\includecodehash[]{Aho-Corasick}{../code/String/Aho-Corasick.cpp}
\includecodehash[]{Palindromic Tree}{../code/String/PalindromicTree.cpp}
\includecodehash[]{Suffix Automaton}{../code/String/SAM.cpp}
\includecodehash[]{Lyndon Factorization}{../code/String/LyndonFactorization.cpp}
\includecodehash[]{SmallestRotation}{../code/String/SmallestRotation.cpp}

\sectiontitle{Misc}
\includecodehash[]{Fraction Binary Search}{../code/Misc/FractionSearch.cpp}
\includecodehash[]{de Bruijn sequence}{../code/Misc/deBruijn.cpp}
\includecodehash[]{HilbertCurve}{../code/Misc/HilbertCurve.cpp}
\includecodehash[]{Grid Intersection}{../code/Misc/GridIntersection.cpp}
% \includecodehash[]{DLX}{../code/Misc/DLX.cpp}
\includecodehash[]{NextPerm}{../code/Misc/NextPerm.cpp}
% \includecodehash[]{FastIO}{../code/Misc/Fastio.cpp}
% \includecodeX[language=python]{Python FastIO}{../code/Misc/PythonFastIO.py}
\includecodehash[]{HeapSize}{../code/Misc/HeapSize.cpp}
% \includecodehash[]{Trick}{../code/Misc/Trick.cpp}
% \includecodeX[language=python]{PyTrick}{../code/Misc/PyTrick.py}
\includecodeX[language=python]{Python}{../code/Misc/PyFrac.py}
\includecodeX[language=kotlin]{Kotlin}{../code/Misc/example.kt}

% \clearpage
% \includegraphics[scale=0.7]{grid.jpg}

% \clearpage
% \includegraphics[scale=0.9]{Spherical-coordinates.png}

\end{document}
